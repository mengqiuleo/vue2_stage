{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/compiler/index.js","../src/init.js","../src/index.js"],"sourcesContent":["/*\r\n * @Author: Pan Jingyi\r\n * @Date: 2022-10-04 17:45:37\r\n * @LastEditTime: 2022-10-04 18:10:33\r\n */\r\n// 重写数组中的部分方法\r\n\r\nlet oldArrayProto = Array.prototype; //获取数组的原型\r\n\r\nexport let newArrayProto = Object.create(oldArrayProto);\r\n\r\nlet methods = [ //找到所有变异方法\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'reverse',\r\n  'sort',\r\n  'splice'\r\n] //concat slice 都不会改变原数组\r\n\r\nmethods.forEach(method => {\r\n  //arr.push(1,2,3)\r\n  newArrayProto[method] = function(...args){ //这里重写了数组的方法\r\n    const result = oldArrayProto[method].call(this,...args) //内部调用原来的方法\r\n    \r\n    //我们需要对新增的数据再次进行劫持\r\n    let inserted; //该变量存放新增的数据值\r\n\r\n    // 根据newArrayProto的被引用位置：我们可以得知，这里的this应该是 class Observe的实例对象\r\n    let ob = this.__ob__;//这里的ob就是Observe实例，并且它身上有对数组进行观测的observeArray方法\r\n\r\n    switch(method){\r\n      case 'push':\r\n      case 'unshift': //arr.unshift(1,2,3)\r\n        inserted = args;\r\n        break;\r\n      case 'splice': //arr.splice(0,1,{a:1})\r\n        inserted = args.slice(2);\r\n      default:\r\n        break;\r\n    }\r\n    console.log('新增的数组的数据：',inserted);\r\n    if(inserted){ //对新增的内容再次进行观测\r\n      //既然要对新增的数据进行观测：那么还是要调用最初监测数组的方法来对新增数据进行观测\r\n      //那个新增的方法在Observe实例的observeArray函数，所以我们要拿到Observe实例\r\n      //怎么拿？ 在Observe类中，我们已经绑定了this到__ob__属性上，并且在这里：根据这里被调用的位置可知，这里的this就是class Observe的实例对象\r\n      //所以，我们直接拿一个变量来承接Observe实例 -> let ob = this.__ob__;(在上面已经声明过了)\r\n    \r\n      //下面就是对新增的数据再次进行观测\r\n      ob.observeArray(inserted);\r\n    }\r\n\r\n    return result\r\n  }\r\n})","import { newArrayProto } from \"./array\"\r\n\r\n/*\r\n * @Author: Pan Jingyi\r\n * @Date: 2022-10-04 15:33:12\r\n * @LastEditTime: 2022-10-04 19:24:10\r\n */\r\nclass Observer{\r\n  constructor(data){\r\n    //Object.defineProperty只能劫持已经存在的属性（vue里面会为此单独写一些api $set $delete）\r\n    \r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false //将__ob__变成不可枚举型（循环时无法获取到）\r\n    })\r\n    //上面就是一个定义属性，不必要再写 data.__ob__ = this; 这句代码\r\n\r\n    //data.__ob__ = this;//将this实例绑定到__ob__属性上\r\n    //不仅是将this绑定到__ob__属性上，方便再次对新增的数组内容进行观测（具体观测在array.js文件中）\r\n    //而且也给数据加了一个标识：因为在最初的入口中，我们需要判断当前数据是否被劫持过了，如果已经被劫持了，那就直接返回：\r\n    //如果一个对象被劫持过了，那就不需要再被劫持了（要判断一个对象是否被劫持过，可以增添一个实例，用实例来判断是否被劫持过）\r\n    //既然是用一个实例来判断当前数据是否被劫持过了：\r\n    //那么这个 __ob__ 属性就是一个标识，如果数据已经被劫持了，那么它的实例身上一定有一个__ob__的标识\r\n    //具体代码在 observe(data)函数中体现\r\n\r\n    // 增加这个__ob__属性，其实会有一点问题 -> 会产生死循环\r\n    // 因为给当前类的实例增加了这个属性的值是this代指当前对象\r\n    //当我们对进行属性劫持并且遍历各个属性值时，走到defineReactive函数，进行set设置时，又会走observe函数，然后又会进到类的实例中，\r\n    // 在类的实例中，又会对对象进行劫持，然后就会产生死循环\r\n    //如何解决？ 将这个属性变成不可枚举型的，这部分操作在上面\r\n\r\n\r\n    if(Array.isArray(data)){\r\n      //这里我们可以重写数组中的方法，7个变异方法是可以修改数组本身的\r\n      data.__proto__ = newArrayProto //保留数组原有的特性，并且重写部分方法\r\n      this.observeArray(data) //如果数组中放的是对象，可以监控到对象的变化\r\n    }else{\r\n      this.walk(data)\r\n    }\r\n    \r\n  }\r\n\r\n  walk(data){ //循环对象，对象属性依次劫持\r\n    // 重新定义属性\r\n    Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\r\n  }\r\n\r\n  observeArray(data){\r\n    // 对数组中的是对象的某一项进行观测\r\n    data.forEach(item => observe(item))\r\n  }\r\n}\r\n\r\nexport function defineReactive(target, key, value){\r\n  observe(value); //递归进行：如果属性是对象那就继续进行代理\r\n  Object.defineProperty(target, key, {\r\n    get(){ //取值的时候 执行get\r\n      return value\r\n    },\r\n    set(newValue){ //修改的时候，会执行set\r\n      if(newValue){\r\n        if(newValue === value) return\r\n        observe(value); //递归进行：如果设置的值还是对象那就继续进行代理\r\n        value = newValue\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  //对对象进行劫持\r\n  if(typeof data !== 'object' || data == null){\r\n    return; //只对对象进行劫持\r\n  }\r\n\r\n  if(data.__ob__ instanceof Observer){ //说明这个对象被代理过了\r\n    return data.__ob__;\r\n  }\r\n  //如果一个对象被劫持过了，那就不需要再被劫持了（要判断一个对象是否被劫持过，可以增添一个实例，用实例来判断是否被劫持过）\r\n\r\n  return new Observer(data); //我们返回的是一个被劫持过的对象\r\n}","/*\r\n * @Author: Pan Jingyi\r\n * @Date: 2022-10-04 15:28:08\r\n * @LastEditTime: 2022-10-04 15:59:30\r\n */\r\nimport { observe } from './observe/index'\r\n\r\nexport function initState(vm){\r\n  const opts = vm.$options; //获取所有选项\r\n  if(opts.data) {\r\n    initData(vm);\r\n  }\r\n}\r\n\r\n//将 vm._data 用 vm 来代理\r\nfunction proxy(vm, target, key){\r\n  Object.defineProperty(vm, key, {\r\n    get(){\r\n      return vm[target][key];\r\n    },\r\n    set(newValue){\r\n      vm[target][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\nfunction initData(vm){\r\n  let data = vm.$options.data; //data可能是函数或者对象\r\n  // 这里我们只是拿到了用户的数据，但是得把数据绑定到vm上，如何绑定呢？用 _data\r\n  data = typeof data === 'function' ? data.call(vm) : data; //data是用户返回的对象\r\n\r\n  vm._data = data //我将返回的对象放到了_data上\r\n  //现在已经成功绑定了，但是访问不太方便：vm._data.name\r\n  //怎么变方便呢？ -> 将 vm._data 用 vm 来代理\r\n\r\n  // 接下来是对数据进行劫持 vue2里采用了一个api defineProperty\r\n  observe(data)\r\n\r\n  //将 vm._data 用 vm 来代理\r\n  for(let key in data){\r\n    proxy(vm, '_data', key);\r\n  }\r\n}","/*\r\n * @Author: Pan Jingyi\r\n * @Date: 2022-10-04 19:50:35\r\n * @LastEditTime: 2022-10-04 20:44:23\r\n */\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;  \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配标签开头 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的，第一个分组就是属性的key, value就是 分组3、分组4、分组5\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g //匹配的是表达式的变量 {{ name }} 这里会匹配出name\r\n\r\n// 将模板解析成ast语法树\r\n//思路：匹配一部分，然后删掉这部分，直到删除完毕，使用while函数\r\nfunction parseHTML(html) { //html最开始肯定是一个<\r\n  function advance(n){\r\n    html = html.substring(n);\r\n  }\r\n\r\n  function parseStartTag(){\r\n    const start = html.match(startTagOpen);\r\n    // console.log(start); start是一个数组，打印查看\r\n    if(start) {\r\n      const match = {\r\n        tagName: start[1], //标签名(其实对于start数组我们可以将值打印出来看)\r\n        attrs: [] //标签属性\r\n      }\r\n      advance(start[0].length); //前进：将已经匹配了的删除\r\n      // console.log(match, html);\r\n    }\r\n    return false; //不是开始标签\r\n  }\r\n\r\n\r\n  while(html){\r\n    // 如果textEnd 为0， 说明是一个开始标签或者 是结束标签(如果是结束标签的话，那么就说明结束标签前面的字符全部被匹配完毕，并且也被删除了，因为我们的匹配会将匹配完的地方逐渐删除掉)\r\n    // 如果textEnd 大于0，说明是这样的： hello</div> , 此时还在匹配文本串\r\n    let textEnd = html.indexOf('<'); \r\n\r\n    if(textEnd == 0){ //如果是开始标签\r\n      parseStartTag();\r\n\r\n      break;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n//对模板进行编译处理\r\nexport function compileToFunction(template) {\r\n  // 第一步：将template 转换为 ast语法树\r\n  let ast = parseHTML(template)\r\n\r\n  // 第二步：生成render方法（render方法执行后返回的结果就是 虚拟DOM）\r\n  console.log(template);\r\n}","/*\r\n * @Author: Pan Jingyi\r\n * @Date: 2022-10-04 15:16:44\r\n * @LastEditTime: 2022-10-04 19:55:48\r\n */\r\nimport { initState } from './state'\r\nimport { compileToFunction } from './compiler/index'\r\n\r\nexport function initMixin(Vue) { //就是给Vue增加init方法的\r\n  Vue.prototype._init = function(options){ //用于初始化话操作\r\n    // vm.$options 就是获取用户的配置\r\n\r\n    const vm = this;\r\n    vm.$options = options; //将用户的选项挂载到实例上\r\n\r\n    //初始化状态：就是挂载属性，方法，计算属性...\r\n    initState(vm);\r\n\r\n    if(options.el){\r\n      vm.$mount(options.el); //实现数据的挂载\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function(el) {\r\n    const vm = this;\r\n    el = document.querySelector(el);\r\n    let ops = vm.$options;\r\n\r\n    //优先级：render > template > el\r\n    //如果没有render\r\n    if(!ops.render) { //先进行查找有没有render函数\r\n      let template; //没有render查看是否写了template，没有写template就用外部的template\r\n      if(!ops.template && el) { //没有写模板，但是写了 el\r\n        template = el.outerHTML;\r\n      }else { //如果有模板\r\n        if(el) {\r\n          template = ops.template;\r\n        }\r\n      }\r\n      //写了template，就用写了的template\r\n      if(template){\r\n        //这里需要对模板进行编译\r\n        const render = compileToFunction(template); //根据template生成一个render函数\r\n        ops.render = render; //挂载render属性\r\n      }\r\n    }\r\n\r\n    //有render就直接获取，我们最终都是要拿到一个render函数\r\n    ops.render; //最终就可以获取render方法\r\n  }\r\n}\r\n\r\n","import { initMixin } from './init'\r\n\r\n// 将所有方法都耦合在一起\r\nfunction Vue(options) { //options就是用户的选项\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue); //扩展了init方法\r\n\r\nexport default Vue"],"names":["oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","forEach","method","args","result","call","inserted","ob","__ob__","slice","console","log","observeArray","Observer","data","defineProperty","value","enumerable","isArray","__proto__","walk","keys","key","defineReactive","item","observe","target","get","set","newValue","initState","vm","opts","$options","initData","proxy","_data","ncname","qnameCapture","startTagOpen","RegExp","parseHTML","html","advance","n","substring","parseStartTag","start","match","tagName","attrs","length","textEnd","indexOf","compileToFunction","template","initMixin","Vue","_init","options","el","$mount","document","querySelector","ops","render","outerHTML"],"mappings":"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"}